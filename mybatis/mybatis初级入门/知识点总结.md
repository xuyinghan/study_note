## \#{}和${}区别

- 区别1

  ```
  \#{} ：相当于JDBC SQL语句中的占位符? (PreparedStatement) 
  
  ${} : 相当于JDBC SQL语句中的连接符合 + (Statement)
  ```

  

- 区别2

  ```
  #{} ： 进行输入映射的时候，会对参数进行类型解析（如果是String类型，那么SQL语句会自动加
  上’’）
  ${} :进行输入映射的时候，将参数原样输出到SQL语句中
  ```

  

- 区别3

  ```
  #{} ： 如果进行简单类型（String、Date、8种基本类型的包装类）的输入映射时，#{}中参数名称
  可以任意
  ${} : 如果进行简单类型（String、Date、8种基本类型的包装类）的输入映射时，${}中参数名称
  必须是value
  
  ```

  

- 区别4

  ```
  ${} :存在SQL注入问题 ，使用OR 1=1 关键字将查询条件忽略
  ```

- 区别5

  ```
  #{}：是通过反射获取数据的---StaticSqlSource ${}：是通过OGNL表达式会随着对象的嵌套而相应的发生层级变化 --DynamicSqlSource
  ```

  

使用${}的场景  like  '%${value}%', 如果用#{} 字符串类型会带引号，预期不符。此时可以使用${}。项目中用的时候用的是concat 函数拼接的 % 与 #{}。



# 延迟加载问题

####  N+1问题 

- 深度延迟加载的使用会提升性能。

- 如果延迟加载的表数据太多，此时会产生N+1问题，主信息加载一次算1次，而从信息是会根据主信息传递过来的条件，去查询从表多次。

  举例子：用户表未更新，但是用户关联的订单表新增n条，则会发送n条sql查询信息。非一条。



# 缓存问题

正式开发，**是将mybatis和spring进行整合开发，事务控制在service中。**

 一个service方法中包括很多mapper方法调用： 如果是执行两次service调用查询相同的用户信息，是不走一级缓存的，因为mapper方法结束， sqlSession就关闭，一级缓存就清空。